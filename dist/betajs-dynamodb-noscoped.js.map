{"version":3,"sources":["betajs-dynamodb-noscoped.js"],"names":["Scoped","subScope","binding","define","assumeVersion","DatabaseTable","Promise","Objs","Types","ArrayIterator","scoped","extend","inherited","constructor","apply","arguments","_table_options","idkeys","unshift","datekeys","table","__table","create","_database","dynamodb","mapSuccess","db","params","TableName","_table_name","client","primary_key","_encode","data","valueType","_decode","_find","query","options","queryParams","__queryParams","Object","assign","funcCallback","Items","_findOne","Key","get","Item","_count","Count","_insertRow","row","put","result","_removeRow","delete","_updateRow","key","updateParams","__updateParams","ReturnValues","update","ensureIndex","obj","success","objectBy","workQuery","updateExpressions","expressionAttributesValues","iter","item","index","indexValue","Math","floor","random","push","join","keyConditionExpresion","filterConditionExpresion","expressionAttributesNames","keyConditions","is_object","operator","keys","op","values","filterExpression","Database","DynamoDatabaseTable","Strings","Uri","call","AWS","require","config","dynamo_module","__objects","value","__dynamodb","DynamoDB","__client","DocumentClient","createTable","database","deleteTable","_tableClass","dynamo_object_id","id","generate_object_id","destroy"],"mappings":"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","sourcesContent":["/*!\nbetajs-dynamodb - v1.0.1 - 2019-02-21\nCopyright (c) Oliver Friedmann,Pablo Iglesias\nApache-2.0 Software License.\n*/\n\n(function () {\nvar Scoped = this.subScope();\nScoped.binding('module', 'global:BetaJS.Data.Databases.DynamoDB');\nScoped.binding('base', 'global:BetaJS');\nScoped.binding('data', 'global:BetaJS.Data');\nScoped.define(\"module:\", function () {\n\treturn {\n    \"guid\": \"1f507e0c-602b-4372-b067-4e19442f28f4\",\n    \"version\": \"1.0.1\",\n    \"datetime\": 1550783556070\n};\n});\nScoped.assumeVersion('base:version', '~1.0.96');\nScoped.assumeVersion('data:version', '~1.0.41');\nScoped.define(\"module:DynamoDatabaseTable\", [\n    \"data:Databases.DatabaseTable\",\n    \"base:Promise\",\n    \"base:Objs\",\n    \"base:Types\",\n    \"base:Iterators.ArrayIterator\"\n], function(DatabaseTable, Promise, Objs, Types, ArrayIterator, scoped) {\n    return DatabaseTable.extend({\n        scoped: scoped\n    }, function(inherited) {\n        return {\n\n            constructor: function() {\n                inherited.constructor.apply(this, arguments);\n                this._table_options = this._table_options || [];\n                this._table_options.idkeys = this._table_options.idkeys || [];\n                this._table_options.idkeys.unshift(\"_id\");\n                this._table_options.datekeys = this._table_options.datekeys || [];\n            },\n\n            table: function() {\n                if (this.__table)\n                    return Promise.create(this.__table);\n                return this._database.dynamodb().mapSuccess(function(db) {\n                    this.__table = {\n                        params: {\n                            TableName: this._table_name\n                        },\n                        client: db.client\n                    };\n                    return this.__table;\n                }, this);\n            },\n\n            primary_key: function() {\n                return \"_id\";\n            },\n\n            _encode: function(data, valueType) {\n                return data;\n            },\n\n            _decode: function(data) {\n                return data;\n            },\n\n            _find: function(query, options) {\n                return this.table().mapSuccess(function(table) {\n                    const queryParams = this.__queryParams(query, options);\n                    const params = Object.assign(table.params, queryParams);\n                    return Promise.funcCallback(table.client, table.client.query, params).mapSuccess(function(data) {\n                        return new ArrayIterator(data.Items);\n                    }, this);\n                }, this);\n            },\n\n            _findOne: function(query) {\n                return this.table().mapSuccess(function(table) {\n                    const params = Object.assign(table.params, {\n                        Key: query\n                    });\n                    return Promise.funcCallback(table.client, table.client.get, params).mapSuccess(function(data) {\n                        return new ArrayIterator(data.Item);\n                    }, this);\n                }, this);\n            },\n\n            _count: function(query) {\n                return this.table().mapSuccess(function(table) {\n                    const queryParams = this.__queryParams(query, options);\n                    const params = Object.assign(table.params, queryParams);\n                    return Promise.funcCallback(table.client, table.client.query, params).mapSuccess(function(data) {\n                        return new ArrayIterator(data.Count);\n                    }, this);\n                }, this);\n            },\n\n            _insertRow: function(row) {\n                return this.table().mapSuccess(function(table) {\n                    const params = Object.assign(table.params, {\n                        Item: row\n                    });\n                    return Promise.funcCallback(table.client, table.client.put, params).mapSuccess(function(result) {\n                        return result;\n                    }, this);\n                }, this);\n            },\n\n            _removeRow: function(query) {\n                return this.table().mapSuccess(function(table) {\n                    const params = Object.assign(table.params, {\n                        Key: query\n                    });\n                    return Promise.funcCallback(table.client, table.client.delete, params);\n                }, this);\n            },\n\n            _updateRow: function(key, data) {\n                return this.table().mapSuccess(function(table) {\n                    const updateParams = this.__updateParams(data);\n                    let params = Object.assign(table.params, {\n                        Key: key,\n                        ReturnValues: \"UPDATED_NEW\"\n                    });\n                    params = Object.assign(params, updateParams);\n                    return Promise.funcCallback(table.client, table.client.update, params).mapSuccess(function(result) {\n                        return result;\n                    }, this);\n                }, this);\n            },\n\n            ensureIndex: function(key) {\n                var obj = {};\n                obj[key] = 1;\n                this.table().success(function(table) {\n                    table.ensureIndex(Objs.objectBy(key, 1));\n                });\n            },\n\n            __updateParams(query) {\n                const workQuery = Object.assign(query);\n                let updateExpressions = [];\n                let expressionAttributesValues = [];\n                Objs.iter(workQuery, function(item, index) {\n                    const indexValue = Math.floor((Math.random() * 10) + 1);\n                    updateExpressions.push(`${index} = :${indexValue}`);\n                    expressionAttributesValues[`:${indexValue}`] = item;\n                });\n\n                return {\n                    \"UpdateExpression\": \"set \" + updateExpressions.join(\",  \"),\n                    \"ExpressionAttributeValues\": expressionAttributesValues\n                };\n            },\n\n            __queryParams(query, options) {\n                const workQuery = Object.assign(query);\n                let keyConditionExpresion = [];\n                let filterConditionExpresion = [];\n                let expressionAttributesNames = [];\n                let expressionAttributesValues = [];\n                Objs.iter(workQuery.keyConditions, function(item, index) {\n                    if (Types.is_object(item)) {\n                        const operator = Objs.keys(item).join();\n                        if (operator !== \"begins_with\") {\n                            let op = \"\";\n                            switch (operator) {\n                                case \"ne\":\n                                    op = \"!=\";\n                                    break;\n                                default:\n                                    op = \"=\";\n                            }\n                            keyConditionExpresion.push(`#${index} ${op} :${index}`);\n                        } else {\n                            keyConditionExpresion.push(`begins_with(#${index}, :${index})`);\n                        }\n                        expressionAttributesNames[`#${index}`] = index;\n                        expressionAttributesValues[`:${index}`] = Objs.values(item)[0];\n                    } else {\n                        keyConditionExpresion.push(`#${index} = :${index}`);\n                        expressionAttributesNames[`#${index}`] = index;\n                        expressionAttributesValues[`:${index}`] = item;\n                    }\n                });\n\n                Objs.iter(workQuery.filterExpression, function(item, index) {\n                    if (Types.is_object(item)) {\n                        const operator = Objs.keys(item).join();\n                        if (operator !== \"begins_with\") {\n                            filterConditionExpresion.push(`#${index} ${operator} :${index}`);\n                        } else {\n                            filterConditionExpresion.push(`begins_with(#${index}, :${index})`);\n                        }\n                        expressionAttributesNames[`#${index}`] = index;\n                        expressionAttributesValues[`:${index}`] = Objs.values(item)[0];\n                    } else {\n                        filterConditionExpresion.push(`#${index} = :${index}`);\n                        expressionAttributesNames[`#${index}`] = index;\n                        expressionAttributesValues[`:${index}`] = item;\n                    }\n                });\n\n                return {\n                    \"KeyConditionExpression\": keyConditionExpresion.join(\" and \"),\n                    \"FilterExpression\": filterConditionExpresion.join(\" and \"),\n                    \"ExpressionAttributeNames\": expressionAttributesNames,\n                    \"ExpressionAttributeValues\": expressionAttributesValues\n                };\n            }\n\n        };\n    });\n});\nScoped.define(\"module:DynamoDatabase\", [\n    \"data:Databases.Database\",\n    \"module:DynamoDatabaseTable\",\n    \"base:Strings\",\n    \"base:Types\",\n    \"base:Objs\",\n    \"base:Promise\",\n    \"base:Net.Uri\"\n], function(Database, DynamoDatabaseTable, Strings, Types, Objs, Promise, Uri, scoped) {\n    return Database.extend({\n        scoped: scoped\n    }, function(inherited) {\n        return {\n\n            constructor: function(db) {\n                inherited.constructor.call(this);\n                const AWS = require(\"aws-sdk\");\n                AWS.config.update(db);\n                this.dynamo_module = AWS;\n            },\n\n            dynamodb: function() {\n                if (this.__objects)\n                    return Promise.value(this.__objects);\n                this.__dynamodb = new this.dynamo_module.DynamoDB();\n                this.__client = new this.dynamo_module.DynamoDB.DocumentClient();\n                this.__objects = {\n                    \"database\": this.__dynamodb,\n                    \"client\": this.__client\n                };\n                return Promise.value(this.__objects);\n            },\n\n            createTable(params) {\n                return this.dynamodb().mapSuccess(function(db) {\n                    return Promise.funcCallback(db.database, db.database.createTable, params).mapSuccess(function(result) {\n                        return result;\n                    }, this);\n                }, this);\n            },\n\n            deleteTable(params) {\n                return this.dynamodb().mapSuccess(function(db) {\n                    return Promise.funcCallback(db.database, db.database.deleteTable, params).mapSuccess(function(result) {\n                        return result;\n                    }, this);\n                }, this);\n            },\n\n            _tableClass: function() {\n                return DynamoDatabaseTable;\n            },\n\n            dynamo_object_id: function(id) {\n                //ADD Ids Generators\n            },\n\n            generate_object_id: function(id) {\n                //ADD Ids Generators\n            },\n\n            destroy: function() {\n                if (this.__dynamodb)\n                    this.__dynamodb = null;\n                if (this.__client)\n                    this.__client = null;\n                inherited.destroy.call(this);\n            }\n\n        };\n\n    }, {});\n});\n}).call(Scoped);"],"file":"betajs-dynamodb-noscoped.js"}